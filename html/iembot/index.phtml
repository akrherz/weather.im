<?php 

// Set the west panel as collapsed
$cc = isset($_GET["cc"]) ? "true": "false";
?>
<html>
<head>
<title>IEMBot Monitor</title>
<link rel="stylesheet" type="text/css" href="/vendor/ext/3.4.1/resources/css/ext-all.css"/>
<script type="text/javascript" src="/vendor/ext/3.4.1/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="/vendor/ext/3.4.1/ext-all.js"></script>
<script type="text/javascript" src="/vendor/ext/ux/StatusBar.js"></script>
<script type="text/javascript" src="rooms.js"></script>
<script type="text/javascript" src="soundmanager2.js"></script>
<script>
soundManager.setup({
    url: "swf/"});
soundManager.consoleOnly = true;
soundManager.debugMode = false;
soundManager.onload = function() {
 soundManager.createSound("message_new","sounds/message_new.mp3");
}

Ext.namespace("cfg");
cfg.server = "iem";
cfg.banner = "iem-header";
cfg.config_collapsed = <?php echo $cc; ?>;
</script>
<script type="text/javascript" src="static.js"></script>
</head>
<style type="text/css">
.new-tab{
  background-image:url(new_tab.gif) !important;
}
td.x-grid3-td-message {
    overflow: hidden;
}
td.x-grid3-td-message div.x-grid3-cell-inner {
    white-space: normal;
}
</style>
<body>
<div id="iem-header">
<strong>IEMBot Anonymous Monitor</strong> |
<a href="https://mesonet.agron.iastate.edu/projects/iembot/">IEMBot Project Homepage</a> |
<a href="https://mesonet.agron.iastate.edu">IEM Homepage</a> | 
<a href="https://weather.im">weather.IM Homepage</a> 
</div>
<div id="help">
<div style="padding: 10px;">
<h3 class="heading">IEMBot Web Monitor</h3>
<p>&nbsp;</p>
<p>This application is a web based monitor of the messages 
    <a href="https://mesonet.agron.iastate.edu/projects/iembot/">IEMBot</a> produces.  These messages are organized by the NWS Office that issued them.  You can monitor these messages
in real-time as each office will appear as a "tab" in this window.</p>
<p>&nbsp;</p>
<p>This application presents links to web applications specially designed to
display the various products.  These apps include:</p>
<ul>
 <li><a href="https://mesonet.agron.iastate.edu/vtec/">VTEC Product Browser</a></li>
 <li><a href="https://mesonet.agron.iastate.edu/GIS/apps/rview/watch.phtml">SPC Watch Overviews</a></li>
 <li><a href="https://mesonet.agron.iastate.edu/river/wfo.phtml">River Summary App</a></li>
 <li><a href="https://mesonet.agron.iastate.edu/cow/maplsr.phtml">Local Storm Report Mapping</a></li>
</ul>
<p>&nbsp;</p>
<h3>JSON web service</h3>
<p>&nbsp;</p>
<p>Data is provided to this application in a web 2.0 fashion by a JSON service.
You can directly call this JSON service to get the same information. The URI 
template is like:
<pre>
https://weather.im/iembot-json/room/roomname?seqnum=#
</pre>
<br />The seqnum is simple a message counter.  You would want to start with 0
to get the most recent history.  Then use the largest value you get back each
call to only fetch the most recent content.  The JSON payload is an array of
messages with index values of:
<ul>
 <li><i>seqnum</i>: The sequence number of the message</li>
 <li><i>ts</i>: The timestamp of the message in GMT</li>
 <li><i>author</i>: The author of the message</li>
 <li><i>log</i>: The message usually in HTML format</li>
</ul>
<p>&nbsp;</p>
<p>If you plan on developing a large application against this service, please
let <a href="https://mesonet.agron.iastate.edu/info/contacts.php">us know</a>.
<p>&nbsp;</p>
<p>As always, this information is provided without warranty and the possibility of removal in the future.</p>

</div>
</div>
</body>
</html>
